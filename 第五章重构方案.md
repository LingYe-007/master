# 第五章重构方案：按系统工程实现格式

## 一、目标与原则

- **目标**：将第五章从偏学术描述改为**标准系统工程实现**结构，与大纲一致。
- **原则**：保留现有图表、表格与可复用段落；仅调整章节层级与标题，补全 5.1 需求分析、5.2.2 数据不出域、5.3.4 压缩与隐私、5.4.2 性能验证等缺失或薄弱部分；新增图采用占位+说明，与现有占位风格一致。

## 二、新旧结构对照

| 新结构（大纲） | 现有内容来源 | 处理方式 |
|----------------|-------------|----------|
| **章引言** | 原「系统概述」第 1 段 + 设计原则精炼 | 合并为一段引言，点明四部分：需求分析、总体架构、关键模块实现、系统测试。 |
| **5.1 系统需求分析** | 无专门小节 | **新增**。5.1.1 从概述与设计原则提炼业务需求（联邦认证、端云协同、隐私、通信、业务需求图占位）；5.1.2 从推荐/监控/设置提炼用户需求（个人画像、训练监控、学术推荐、用户需求图占位）。 |
| **5.2 系统总体架构设计** | 原「系统总体架构设计」+ 数据存储层中的图 | 5.2.1 逻辑架构：保留四层描述 + 图~\ref{fig:sys_arch}；5.2.2 数据不出域：保留本地子图存储说明 + 图~\ref{fig:storage_layer}。 |
| **5.3 系统关键模块实现** | 原「技术选型」「关键模块详细设计」+ 界面展示中的技术信息 | 5.3.1 开发与运行环境：原技术选型表 + 硬件/软件简述；5.3.2 联邦协同训练：原训练流程 + 仿真引擎 + 图~\ref{fig:simulator_arch}；5.3.3 学术资源推荐与冷启动：原分级推荐 + 可解释性 + 图~\ref{fig:rec_logic}；5.3.4 通信压缩与隐私：**新增**，从第四章与系统概述提炼（语义感知压缩器、本地差分隐私），篇幅约半页。 |
| **5.4 系统功能测试** | 原「系统界面展示与功能测试」 | 5.4.1 核心功能测试：保留测试表~\ref{tab:func_test} 及用例说明；5.4.2 性能与鲁棒性验证：监控看板（图~\ref{fig:ui_monitor}）+ 通信开销对比测试简述；界面展示（推荐页、个人设置）并入 5.4 中作为「测试与展示」或放在 5.4.2 作为验证依据。 |
| **本章小结** | 原「本章小结」 | 按新四部分（需求、架构、实现、测试）略作改写，保持与全文一致。 |

## 三、标题与编号

- 章：`\section{第五章\quad 基于联邦异构图模型的推荐系统设计与实现}`（不变）。
- 一级节：`\subsection{系统需求分析}`、`\subsection{系统总体架构设计}`、`\subsection{系统关键模块实现}`、`\subsection{系统功能测试}`。
- 二级节：`\subsubsection{业务需求分析}`、`\subsubsection{用户需求分析}`、`\subsubsection{逻辑架构设计}`、`\subsubsection{数据不出域机制设计}` 等。
- 三级节：用 `\paragraph{}` 或保留现有 \subsubsection 下的 \paragraph（如「1. 训练流程控制」），与现有写法一致。

## 四、图表与占位

- **保留**：`fig:sys_arch`、`fig:storage_layer`、`tab:tech_stack`、`fig:simulator_arch`、`fig:rec_logic`、`fig:ui_rec`、`fig:ui_monitor`、`fig:ui_settings`、`tab:func_test`。
- **新增占位**（可选，若不加图则用文字描述）：  
  - 5.1.1 末：系统业务功能需求图（图 5-X，占位+说明）；  
  - 5.1.2 末：系统用户需求分析图（图 5-X，占位+说明）。  
  若不加占位图，则 5.1 仅用列表+一段总结即可。
- **5.4.2**：明确写出「系统监控看板测试」对应图~\ref{fig:ui_monitor}（训练 Loss 随轮次收敛）；通信开销对比一句带过（语义感知压缩开启前后流量变化）。

## 五、具体改写要点

1. **5.1.1 业务需求分析**：用条目列出「联邦身份认证、端云协同训练、隐私安全保障、高效通信管理」等，每条 1～2 句，与当前系统能力对应；可末句说明「系统业务功能需求如图 5-X 所示」或省略图。
2. **5.1.2 用户需求分析**：用条目列出「个人画像管理、联邦训练监控、学术资源推荐」，对应个人设置页、监控面板、推荐列表页；可末句说明「系统用户需求分析如图 5-X 所示」或省略图。
3. **5.2.1**：保持四层架构描述，图~\ref{fig:sys_arch}  caption 可改为「系统总体设计架构图」以与大纲一致。
4. **5.2.2**：标题「数据不出域机制设计」，保留「本地子图存储示意图」图~\ref{fig:storage_layer} 及现有文字。
5. **5.3.4**：新写「语义感知压缩器实现」（动态元路径选择器+残差梯度量化在系统中的集成）、「本地差分隐私机制」（拉普拉斯噪声、参数配置），与第四章和系统概述呼应，控制在一页内。
6. **5.4**：测试表不变；5.4.2 先写监控看板测试（图~\ref{fig:ui_monitor}），再写通信开销对比；界面截图（推荐页、设置页）作为测试/验证的展示材料嵌入 5.4.1 或 5.4.2。

## 六、实施顺序

1. 重写章引言（一段，点明四部分）。
2. 新增 5.1（5.1.1 业务需求、5.1.2 用户需求），删除或合并原「系统概述」「系统设计原则」到引言与 5.1。
3. 将原「系统总体架构设计」拆为 5.2.1 与 5.2.2，并改标题。
4. 将「技术选型」改为 5.3.1，「关键模块详细设计」拆为 5.3.2～5.3.4，新增 5.3.4 压缩与隐私。
5. 将「系统界面展示与功能测试」改为 5.4，拆为 5.4.1 核心功能测试与 5.4.2 性能与鲁棒性验证，界面图归入 5.4。
6. 更新本章小结。

按上述方案可直接生成新的 `chapters/chap5_system.tex` 全文。
